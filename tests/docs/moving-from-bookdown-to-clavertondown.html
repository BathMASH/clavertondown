<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>7.3 Moving from Bookdown to ClavertonDown | ClavertonDown Example</title>
  <meta name="description" content="7.3 Moving from Bookdown to ClavertonDown | ClavertonDown Example" />
  <meta name="generator" content="bookdown 0.24 and GitBook 2.6.7" />

  <meta property="og:title" content="7.3 Moving from Bookdown to ClavertonDown | ClavertonDown Example" />
  <meta property="og:type" content="book" />
  
  
  
  

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="7.3 Moving from Bookdown to ClavertonDown | ClavertonDown Example" />
  
  
  

<meta name="author" content="Emma Cliffe, Skills Centre: MASH, University of Bath" />



  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="using-clavertondown-for-the-first-time.html"/>
<link rel="next" href="can-i-tell-people-not-at-claverton-down-about-this.html"/>

<script src="libs/header-attrs-2.11/header-attrs.js"></script>
<script src="libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/fuse.js@6.4.6/dist/fuse.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />








<script type="text/x-mathjax-config">
MathJax.Hub.Register.MessageHook("End Math", function (msg) {
  var nodes = Array.from(msg[1].querySelectorAll('.MJX_Assistive_MathML [id]'));
  while (nodes.length) {
    nodes.shift().removeAttribute('id');
  }
}, 20);
</script>
<script type="text/x-mathjax-config">
MathJax.Hub.Config({
  "fast-preview": {disabled: true},
  explorer:{ subtitle: true },
  MatchWebFonts: { 
    matchFor: { "HTML-CSS": true, NativeMML: false, SVG: false },
    fontCheckDelay: 2000,
    fontCheckTimeout: 30 * 1000
  },
  "HTML-CSS": {
    preferredFont: "STIX",
    availableFonts: ["STIX","TeX"],
    webFont: "STIX-Web",
    linebreaks: { automatic: true, width: "90\% container" }
  },
  CommonHTML: {
    linebreaks: { automatic: true, width: "90\% container" }
  },
  SVG: {
    font: "STIX-Web",
    linebreaks: { automatic: false, width: "90\% container" }
  },
  menuSettings: { 
    collapsible: false, 
    autocollapse: false, 
    explorer: false 
  }
});
</script>




<style type="text/css">
  a {
   color: blue;
  }
  .book .book-summary ul.summary li a, .book .book-summary ul.summary li.active>a, .book .book-body .page-wrapper .page-inner section.normal a {
  color: blue;
  }

  [custom-style=DefinitionStyle] {
    margin-bottom: 1.5em;
    margin-top:1.5em;
    background-color: AliceBlue;
    border-left-style: solid;
    border-color: CadetBlue;
    padding-left: 0.5em;
  }

   .book.color-theme-2 .book-body .page-wrapper .page-inner section.normal [custom-style=DefinitionStyle] {
    margin-bottom: 1.5em;
    margin-top:1.5em;
    background-color: #1c242b;
    border-left-style: solid;
    border-color: CadetBlue;
    padding-left: 0.5em;
  }

  .book.color-theme-1 .book-body .page-wrapper .page-inner section.normal [custom-style=DefinitionStyle] {
    margin-bottom: 1.5em;
    margin-top:1.5em;
    background-color: #f0f6f7;
    border-left-style: solid;
    border-color: CadetBlue;
    padding-left: 0.5em;
  }

  
  [custom-style=TheoremStyle] {
    margin-bottom: 1.5em;
    margin-top:1.5em;
    background-color: honeydew;
    border-left-style: solid;
    border-color: darkseagreen;
    padding-left: 0.5em;
    font-style: italic;
  }

  .book.color-theme-2 .book-body .page-wrapper .page-inner section.normal [custom-style=TheoremStyle] {
    margin-bottom: 1.5em;
    margin-top:1.5em;
    background-color: #182518;
    border-left-style: solid;
    border-color: darkseagreen;
    padding-left: 0.5em;
    font-style: italic;
  }

  .book.color-theme-1 .book-body .page-wrapper .page-inner section.normal [custom-style=TheoremStyle] {
    margin-bottom: 1.5em;
    margin-top:1.5em;
    background-color: #f0fcea;
    border-left-style: solid;
    border-color: darkseagreen;
    padding-left: 0.5em;
    font-style: italic;
  }

  [custom-style=TheoremStyleUpright] {
    margin-bottom: 1.5em;
    margin-top:1.5em;
    background-color: honeydew;
    border-left-style: solid;
    border-color: darkseagreen;
    padding-left: 0.5em;
    font-style: normal;
  }

  .book.color-theme-2 .book-body .page-wrapper .page-inner section.normal [custom-style=TheoremStyleUpright] {
    margin-bottom: 1.5em;
    margin-top:1.5em;
    background-color: #182518;
    border-left-style: solid;
    border-color: darkseagreen;
    padding-left: 0.5em;
    font-style: normal;
  }

  .book.color-theme-1 .book-body .page-wrapper .page-inner section.normal [custom-style=TheoremStyleUpright] {
    margin-bottom: 1.5em;
    margin-top:1.5em;
    background-color: #f0fcea;
    border-left-style: solid;
    border-color: darkseagreen;
    padding-left: 0.5em;
    font-style: normal;
  }

  [custom-style=NameStyle]{
    font-style: normal;
    font-weight: bold;
  }

  [custom-style=NameStyleItalics]{
    font-style: italic;
  }

  
  [custom-style=ProofStyle] {
    margin-bottom: 1.5em;
    margin-top:1.5em;
    background-color: seashell;
    border-left-style: solid;
    border-color: darkkhaki;
    padding-left: 0.5em;
  }

  .book.color-theme-2 .book-body .page-wrapper .page-inner section.normal [custom-style=ProofStyle] {
    margin-bottom: 1.5em;
    margin-top:1.5em;
    background-color: #251e18;
    border-left-style: solid;
    border-color: darkkhaki;
    padding-left: 0.5em;
  }

  .book.color-theme-1 .book-body .page-wrapper .page-inner section.normal [custom-style=ProofStyle] {
    margin-bottom: 1.5em;
    margin-top:1.5em;
    background-color: #fdf3e9;
    border-left-style: solid;
    border-color: darkkhaki;
    padding-left: 0.5em;
  }

  [custom-style=ExampleStyle] {
    margin-bottom: 1.5em;
    margin-top:1.5em;
    background-color: lavenderblush;
    border-left-style: solid;
    border-color: mediumorchid;
    padding-left: 0.5em;
  }

  .book.color-theme-2 .book-body .page-wrapper .page-inner section.normal [custom-style=ExampleStyle] {
    margin-bottom: 1.5em;
    margin-top:1.5em;
    background-color: #2b1c21;
    border-left-style: solid;
    border-color: mediumorchid;
    padding-left: 0.5em;
  }

  .book.color-theme-1 .book-body .page-wrapper .page-inner section.normal [custom-style=ExampleStyle] {
    margin-bottom: 1.5em;
    margin-top:1.5em;
    background-color: #fdefef;
    border-left-style: solid;
    border-color: mediumorchid;
    padding-left: 0.5em;
  }
  
</style>

</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li class="chapter" data-level="" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i>Introduction</a></li>
<li class="chapter" data-level="1" data-path="what-formats-do-i-need-to-produce-and-why.html"><a href="what-formats-do-i-need-to-produce-and-why.html"><i class="fa fa-check"></i><b>1</b> What formats do I need to produce and why?</a>
<ul>
<li class="chapter" data-level="1.1" data-path="why-do-we-still-supply-inaccessible-pdfs.html"><a href="why-do-we-still-supply-inaccessible-pdfs.html"><i class="fa fa-check"></i><b>1.1</b> Why do we still supply inaccessible PDFs?</a></li>
<li class="chapter" data-level="1.2" data-path="do-i-really-have-to-put-all-this-on-moodle.html"><a href="do-i-really-have-to-put-all-this-on-moodle.html"><i class="fa fa-check"></i><b>1.2</b> Do I really have to put all this on Moodle?</a></li>
</ul></li>
<li class="chapter" data-level="2" data-path="theorems-and-stuff.html"><a href="theorems-and-stuff.html"><i class="fa fa-check"></i><b>2</b> Theorems and stuff</a>
<ul>
<li class="chapter" data-level="2.1" data-path="but-i-want-to-number-some-of-them.html"><a href="but-i-want-to-number-some-of-them.html"><i class="fa fa-check"></i><b>2.1</b> But I want to number some of them…</a>
<ul>
<li class="chapter" data-level="2.1.1" data-path="but-i-want-to-number-some-of-them.html"><a href="but-i-want-to-number-some-of-them.html#out-of-interest"><i class="fa fa-check"></i><b>2.1.1</b> Out of interest…</a></li>
</ul></li>
<li class="chapter" data-level="2.2" data-path="colour-has-meaning.html"><a href="colour-has-meaning.html"><i class="fa fa-check"></i><b>2.2</b> Colour has meaning</a>
<ul>
<li class="chapter" data-level="2.2.1" data-path="colour-has-meaning.html"><a href="colour-has-meaning.html#so"><i class="fa fa-check"></i><b>2.2.1</b> So…?</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="3" data-path="figures-inside-other-environments.html"><a href="figures-inside-other-environments.html"><i class="fa fa-check"></i><b>3</b> Figures inside other environments</a>
<ul>
<li class="chapter" data-level="3.1" data-path="here-is-a-figure.html"><a href="here-is-a-figure.html"><i class="fa fa-check"></i><b>3.1</b> Here is a figure</a></li>
<li class="chapter" data-level="3.2" data-path="here-is-the-putting-of-a-figure-inside-another-built-in-environment.html"><a href="here-is-the-putting-of-a-figure-inside-another-built-in-environment.html"><i class="fa fa-check"></i><b>3.2</b> Here is the putting of a figure inside another built in environment</a></li>
<li class="chapter" data-level="3.3" data-path="here-is-the-putting-of-a-figure-inside-a-newtheorem.html"><a href="here-is-the-putting-of-a-figure-inside-a-newtheorem.html"><i class="fa fa-check"></i><b>3.3</b> Here is the putting of a figure inside a newtheorem</a></li>
</ul></li>
<li class="chapter" data-level="4" data-path="repeating-environments.html"><a href="repeating-environments.html"><i class="fa fa-check"></i><b>4</b> Repeating environments</a></li>
<li class="chapter" data-level="5" data-path="but-i-want-it-to-do.html"><a href="but-i-want-it-to-do.html"><i class="fa fa-check"></i><b>5</b> But… I want it to do…</a></li>
<li class="chapter" data-level="6" data-path="latex-newcommands-usepackages-etc-.html"><a href="latex-newcommands-usepackages-etc-.html"><i class="fa fa-check"></i><b>6</b> LaTeX newcommands, usepackages etc.</a></li>
<li class="chapter" data-level="7" data-path="great-how-do-i-use-this-thing.html"><a href="great-how-do-i-use-this-thing.html"><i class="fa fa-check"></i><b>7</b> Great. How do I use this thing?</a>
<ul>
<li class="chapter" data-level="7.1" data-path="installing-clavertondown.html"><a href="installing-clavertondown.html"><i class="fa fa-check"></i><b>7.1</b> Installing ClavertonDown</a></li>
<li class="chapter" data-level="7.2" data-path="using-clavertondown-for-the-first-time.html"><a href="using-clavertondown-for-the-first-time.html"><i class="fa fa-check"></i><b>7.2</b> Using ClavertonDown for the first time</a>
<ul>
<li class="chapter" data-level="7.2.1" data-path="using-clavertondown-for-the-first-time.html"><a href="using-clavertondown-for-the-first-time.html#using-the-command-line"><i class="fa fa-check"></i><b>7.2.1</b> Using the command line</a></li>
</ul></li>
<li class="chapter" data-level="7.3" data-path="moving-from-bookdown-to-clavertondown.html"><a href="moving-from-bookdown-to-clavertondown.html"><i class="fa fa-check"></i><b>7.3</b> Moving from Bookdown to ClavertonDown</a>
<ul>
<li class="chapter" data-level="7.3.1" data-path="moving-from-bookdown-to-clavertondown.html"><a href="moving-from-bookdown-to-clavertondown.html#divergence-why-simple-preamble-changes-may-not-have-worked"><i class="fa fa-check"></i><b>7.3.1</b> Divergence: why simple preamble changes may not have worked</a></li>
<li class="chapter" data-level="7.3.2" data-path="moving-from-bookdown-to-clavertondown.html"><a href="moving-from-bookdown-to-clavertondown.html#i-want-to-transform-anyway"><i class="fa fa-check"></i><b>7.3.2</b> I want to transform anyway</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="8" data-path="can-i-tell-people-not-at-claverton-down-about-this.html"><a href="can-i-tell-people-not-at-claverton-down-about-this.html"><i class="fa fa-check"></i><b>8</b> Can I tell people not at Claverton Down about this?</a></li>
</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">ClavertonDown Example</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="moving-from-bookdown-to-clavertondown" class="section level2" number="7.3">
<h2><span class="header-section-number">7.3</span> Moving from Bookdown to ClavertonDown</h2>
<p>If you have been using Bookdown you may find that simply making changes to your preamble, as per the files above, will result in everything working as expected. You can then start using additional ClavertonDown functionality. If you do not use any of it then your content will, at the time of writing, still work in Bookdown if you change your preamble back. However, if you do not wish to use the additional functionality you should consider whether moving to ClavertonDown is the right choice for you - we are diverging from Bookdown and we cannot guarantee ongoing backwards compatibility. You should also consider that Bookdown is changing in ways that ClavertonDown will not and these are explained in the below section.</p>
<div id="divergence-why-simple-preamble-changes-may-not-have-worked" class="section level3" number="7.3.1">
<h3><span class="header-section-number">7.3.1</span> Divergence: why simple preamble changes may not have worked</h3>
<p>If you have written your Bookdown more recently and are using the <a href="https://bookdown.org/yihui/bookdown/markdown-extensions-by-bookdown.html#theorems">fenced div environments</a> rather than the <a href="https://bookdown.org/yihui/bookdown/markdown-extensions-by-bookdown.html#theorem-engine">knitr engine environments</a> then simple changes to your preamble will not move your theorem type statements to the new format. They will remain in Bookdown format. We won’t be ‘fixing’ this because:</p>
<ul>
<li><a href="https://bookdown.org/yihui/bookdown/markdown-extensions-by-bookdown.html#theorem-engine">Bookdown documents written using this method can only be converted to PDF and HTML formats</a>. ClavertonDown exists to enable to conversion to a full range of accessible formats to enable any student to access lecture materials. PDF documents containing mathematical expressions can never be technically accessible and HTML format is only technically accessible for some assistive technology users. Whether you generally supply Word and EPub or not you need to be able to create it on request.</li>
<li>The work we have done to enable extra functionality cannot be delivered via the fenced div approach at this time. It would require all of the functionality to be reimplemented at a completely different point in the conversion and, based on our current understanding, some of the functionality, which was requested by lecturers and students, could not be delivered at this time if at all.</li>
<li>While we accept the reasoning for the change in Bookdown - that it enables richer content to be included within theorem type environments and has a clearer implementation - we have not had any request to enable the types of richer functionality meant here. Other ‘missing’ things were considered more of a problem for lecture materials. If future requests fall into these categories we will look at whether we can implement them while retaining the current functionality. It is also noted that our implementation of the knitr custom blocks has already diverged from that in Bookdown. While it is not correct to call it cleaner it should be more robust than the original custom block engines.</li>
</ul>
<p>If you have a Bookdown document which uses fenced divs you should consider how important it is to you to move to ClavertonDown. We have supplied a function which you can run to create a copy of your document and attempt to change format - as Bookdown has created a function which goes back the other way. Our function is going in the more challenging direction and so it aims to only make the change when it is ‘safe’ to do so and maintains a complete original copy untouched without the user needing to ensure this. If when you run the function there are warnings you will need to do some work by hand to complete the change. If you are at Claverton Down then we do ask you to get in touch with us and tell us if you are then missing functionality and we will do our best to assist - or, at least, to be clear about what your options are. It is possible to <a href="https://bookdown.org/yihui/bookdown/markdown-extensions-by-bookdown.html#theorem-engine">transform back the other way</a> (this is the easier and safer direction) but</p>
<ul>
<li>We will have retained a copy of your original files for you so you don’t need to worry about this if you immediately change your mind!</li>
<li>We assume you are transforming for a reason - to use the functionality of ClavertonDown. In this case any transform back will require you to undo any use of our extra functionality.</li>
</ul>
</div>
<div id="i-want-to-transform-anyway" class="section level3" number="7.3.2">
<h3><span class="header-section-number">7.3.2</span> I want to transform anyway</h3>
<p>If, having read the above, you wish to try it out then you need to change directory to that containing your document run the following on the R command line:</p>
<blockquote>
<p>library(“clavertondown”)</p>
</blockquote>
<blockquote>
<p>intercept_theorems(“./”)</p>
</blockquote>
<p>Please read the output carefully.</p>
<p>If you receive <em>any warning</em> then you have</p>
<ul>
<li>nested theorem type fenced div environments or</li>
<li><a href="https://bookdown.org/yihui/rmarkdown/language-engines.html">knitr engine blocks</a> (including but not limited to theorem type) nested in fenced div theorem type environments or</li>
<li>You have used more than three colons when defining a fenced div despite it not being nested - just set it back to three in this case.</li>
</ul>
<p>Nesting of this kind cannot be converted - theorem type environments cannot be nested in Clavertondown and knitr engine blocks cannot be nested within theorems. You will need to undo the nesting in whatever way makes sense for your content. This type of nesting is a primary example what Bookdown means by ‘richer content’.</p>
</div>
</div>
<!-- </div> -->
            </section>

          </div>
        </div>
      </div>
<a href="using-clavertondown-for-the-first-time.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="can-i-tell-people-not-at-claverton-down-about-this.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": false,
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": null,
"text": null
},
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": [["Notes.html", "HTML page"], ["Notes.pdf", "Standard print PDF"], ["NotesClear.pdf", "Clear print PDF"], ["NotesLarge.pdf", "Large print PDF"], ["Notes.docx", "Accessible Word document"], ["Notes.epub", "Accessible EPub book"]],
"search": {
"engine": "fuse",
"options": null
},
"toc": {
"collapse": "subsection"
}
});
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:")
      if (/^https?:/.test(src))
        src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>
</body>

</html>
